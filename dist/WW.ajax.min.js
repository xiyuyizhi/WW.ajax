/*!
 * authorï¼šxiyuyizhi 
 * Copyright xiyuyizhi.
 */
!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=n(6),u=r(o),i=document.querySelector(".loading");u.default.http.Interceptor(function(){return{request:function(t){return t.headers.token="tokennnn",i.className+=" show",console.log(u.default.http.pendingRequests),t},response:function(t){return u.default.http.pendingRequests.length||(i.className="loading"),t},responseError:function(t){console.log(t),i.className="loading",console.log(u.default.http.pendingRequests)}}}),u.default.http({url:"api/users",type:"post",params:{condition:"haha"},data:{username:"ww",age:22}}).then(function(t){console.log("post success"),console.log(t)}),u.default.http.get("api/users/:userId",{userId:1}).then(function(t){console.log("success"),console.log(t)}),u.default.http.post("api/users",{username:"ww",age:22}).then(function(t){console.log("post success"),console.log(t),console.log(t.headers("content-type"))})},function(t,e,n){"use strict";function r(){}function o(t){try{return t.then}catch(t){return g=t,_}}function u(t,e){try{return t(e)}catch(t){return g=t,_}}function i(t,e,n){try{t(e,n)}catch(t){return g=t,_}}function s(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,t!==r&&v(t,this)}function a(t,e,n){return new t.constructor(function(o,u){var i=new s(r);i.then(o,u),c(t,new h(e,n,i))})}function c(t,e){for(;3===t._81;)t=t._65;return s._10&&s._10(t),0===t._81?0===t._45?(t._45=1,void(t._54=e)):1===t._45?(t._45=2,void(t._54=[t._54,e])):void t._54.push(e):void f(t,e)}function f(t,e){y(function(){var n=1===t._81?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._81?l(e.promise,t._65):p(e.promise,t._65));var r=u(n,t._65);r===_?p(e.promise,g):l(e.promise,r)})}function l(t,e){if(e===t)return p(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=o(e);if(n===_)return p(t,g);if(n===t.then&&e instanceof s)return t._81=3,t._65=e,void d(t);if("function"==typeof n)return void v(n.bind(e),t)}t._81=1,t._65=e,d(t)}function p(t,e){t._81=2,t._65=e,s._97&&s._97(t,e),d(t)}function d(t){if(1===t._45&&(c(t,t._54),t._54=null),2===t._45){for(var e=0;e<t._54.length;e++)c(t,t._54[e]);t._54=null}}function h(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function v(t,e){var n=!1,r=i(t,function(t){n||(n=!0,l(e,t))},function(t){n||(n=!0,p(e,t))});n||r!==_||(n=!0,p(e,g))}var y=n(2),g=null,_={};t.exports=s,s._10=null,s._97=null,s._61=r,s.prototype.then=function(t,e){if(this.constructor!==s)return a(this,t,e);var n=new s(r);return c(this,new h(t,e,n)),n}},function(t,e){(function(e){"use strict";function n(t){s.length||(i(),a=!0),s[s.length]=t}function r(){for(;c<s.length;){var t=c;if(c+=1,s[t].call(),c>f){for(var e=0,n=s.length-c;e<n;e++)s[e]=s[e+c];s.length-=c,c=0}}s.length=0,c=0,a=!1}function o(t){var e=1,n=new p(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}function u(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}t.exports=n;var i,s=[],a=!1,c=0,f=1024,l="undefined"!=typeof e?e:self,p=l.MutationObserver||l.WebKitMutationObserver;i="function"==typeof p?o(r):u(r),n.requestFlush=i,n.makeRequestCallFromTimer=u}).call(e,function(){return this}())},function(t,e){"use strict";function n(t,e){for(var o in e)r.call(e,o)&&("headers"===o?t[o]=n(t[o],e[o]):t[o]=e[o]);return t}Object.defineProperty(e,"__esModule",{value:!0});var r={}.hasOwnProperty;e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={type:"get",url:"",params:"",data:"",headers:{dataType:"json",contentType:"json",withCredentials:!1},async:!0,success:null,error:null}},function(t,e,n){"use strict";function r(){if(a.length)throw a.shift()}function o(t){var e;e=s.length?s.pop():new u,e.task=t,i(e)}function u(){this.task=null}var i=n(2),s=[],a=[],c=i.makeRequestCallFromTimer(r);t.exports=o,u.prototype.call=function(){try{this.task.call()}catch(t){o.onerror?o.onerror(t):(a.push(t),c())}finally{this.task=null,s[s.length]=this}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=(0,f.default)(t);if(e)throw new Error("property "+e+" not allowed");var n=new i.default(t,o.interceptor,o.pendingRequests);return n.getPromise()}Object.defineProperty(e,"__esModule",{value:!0});var u=n(8),i=r(u),s=n(3),a=r(s),c=n(11),f=r(c);["get","post","put","delete","header"].forEach(function(t){t=t.toLowerCase(),o[t]=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var u={type:t,url:n[0]},s=n.length;return"post"==t||"put"==t?(2==s&&(u.data=n[1]),3==s?n[2].headers?(u.data=n[1],u.headers=n[2].headers):(u.params=n[1],u.data=n[2]):(u.params=n[1],u.data=n[2],u.headers=n[3]&&n[3].headers)):(u.params=n[1],u.headers=n[2]&&n[2].headers),new i.default(u,o.interceptor,o.pendingRequests).getPromise()}}),o.pendingRequests=[],o.interceptor={request:null,response:null,responseError:null},o.Interceptor=function(t){(0,a.default)(o.interceptor,t())};var l={http:o};e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=Object.keys(t),r=!0,o=!1,u=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;if(i.default[c]){var f=i.default[c].name,l=i.default[c][t[c]];e.setRequestHeader(f,l)}else e.setRequestHeader(c,t[c])}}catch(t){o=!0,u=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw u}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=void 0;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e.open(t.type,t.url,t.async),o(t.headers,e),e.send(JSON.stringify(t.data)||null),e};var u=n(12),i=r(u)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){var n=void 0;switch(t){case"text":n=e.responseText;break;case"json":n=JSON.parse(e.responseText);break;case"xml":n=e.responseXML;break;case"jsonP":}return n}function i(t,e,n){n({status:t.status,statusText:t.statusText}),e&&e(t.status,t.statusText)}function s(t,e,n,r){r({data:t,status:e.status,statusText:e.statusText,headers:function(t){return e.getResponseHeader(t)}}),n&&n(t,e.status,e.statusText,function(t){return e.getResponseHeader(t)})}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(13),f=r(c),l=n(4),p=r(l),d=n(7),h=r(d),v=n(3),y=r(v),g=n(10),_=r(g),m=n(9),w=r(m),b=function(){function t(e,n,r){o(this,t),this.interceptor=n,this.pendingRequests=r,this.init(e)}return a(t,[{key:"init",value:function(t){t=(0,y.default)((0,w.default)(p.default),(0,w.default)(t)),(0,_.default)(t),this.interceptor.request&&(t=this.interceptor.request(t)),this.pendingRequests.push(t);var e=(0,h.default)(t);this.conf=t,this.xhr=e}},{key:"getPromise",value:function(){var t=this.xhr,e=this.conf,n=this.interceptor,r=this.pendingRequests;return new f.default(function(o,a){t.onreadystatechange=function(){if(4===t.readyState){if(r.splice(r.indexOf(e),1),t.status>=200&&t.status<300||304==t.status){var c=u(e.headers.dataType,t);return n.response&&n.response(c),void s(c,t,e.success,o)}n.responseError&&n.responseError({status:t.status,statusText:t.statusText}),i(t,e.error,a)}}})}}]),t}();e.default=b},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){function e(t,n){var r=Object.keys(t),o=!0,u=!1,i=void 0;try{for(var s,a=r[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var c=s.value;"[object Object]"!=={}.toString.call(t[c])?n[c]=t[c]:(n[c]={},e(t[c],n[c]))}}catch(t){u=!0,i=t}finally{try{!o&&a.return&&a.return()}finally{if(u)throw i}}}var n={};return e(t,n),n}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.url,n=/:([^\/]+)/g;if(t.params&&"[object Object]"=={}.toString.call(t.params)){e=e.replace(n,function(e,n){var r=t.params[n];return delete t.params[n],r});var r=Object.keys(t.params);if(r.length){e+="?";var o=!0,u=!1,i=void 0;try{for(var s,a=r[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var c=s.value;e+=c+"="+encodeURIComponent(t.params[c])+"&"}}catch(t){u=!0,i=t}finally{try{!o&&a.return&&a.return()}finally{if(u)throw i}}t.url=e.substr(0,e.length-1)}else t.url=e}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=Object.keys(t),n=Object.keys(u.default),r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;if(n.indexOf(c)===-1)return c}}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return!1};var o=n(4),u=r(o)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={contentType:{name:"Content-Type",json:"application/json",text:"application/x-www-form-urlencoded",multipart:"multipart/form-data"},dataType:{name:"Accept",json:"application/json, text/javascript, */*; q=0.01",text:"text/plain, */*; q=0.01",html:"text/html, */*; q=0.01"},withCredentials:{name:"withCredentials",true:!0,false:!1}}},function(t,e,n){"use strict";t.exports=n(17)},function(t,e,n){"use strict";var r=n(1);t.exports=r,r.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(t){setTimeout(function(){throw t},0)})}},function(t,e,n){"use strict";function r(t){var e=new o(o._61);return e._81=1,e._65=t,e}var o=n(1);t.exports=o;var u=r(!0),i=r(!1),s=r(null),a=r(void 0),c=r(0),f=r("");o.resolve=function(t){if(t instanceof o)return t;if(null===t)return s;if(void 0===t)return a;if(t===!0)return u;if(t===!1)return i;if(0===t)return c;if(""===t)return f;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new o(e.bind(t))}catch(t){return new o(function(e,n){n(t)})}return r(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function r(i,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof o&&s.then===o.prototype.then){for(;3===s._81;)s=s._65;return 1===s._81?r(i,s._65):(2===s._81&&n(s._65),void s.then(function(t){r(i,t)},n))}var a=s.then;if("function"==typeof a){var c=new o(a.bind(s));return void c.then(function(t){r(i,t)},n)}}e[i]=s,0===--u&&t(e)}if(0===e.length)return t([]);for(var u=e.length,i=0;i<e.length;i++)r(i,e[i])})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){t.forEach(function(t){o.resolve(t).then(e,n)})})},o.prototype.catch=function(t){return this.then(null,t)}},function(t,e,n){"use strict";var r=n(1);t.exports=r,r.prototype.finally=function(t){return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})}},function(t,e,n){"use strict";t.exports=n(1),n(14),n(16),n(15),n(18),n(19)},function(t,e,n){"use strict";function r(t,e){for(var n=[],r=0;r<e;r++)n.push("a"+r);var o=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([s]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(u,t)}function o(t){for(var e=Math.max(t.length-1,3),n=[],r=0;r<e;r++)n.push("a"+r);var o=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+e+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+s+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(t,e){return"case "+e+":res = fn.call("+["self"].concat(n.slice(0,e)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(u,t)}var u=n(1),i=n(5);t.exports=u,u.denodeify=function(t,e){return"number"==typeof e&&e!==1/0?r(t,e):o(t)};var s="function (err, res) {if (err) { rj(err); } else { rs(res); }}";u.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,r=this;try{return t.apply(this,arguments).nodeify(n,r)}catch(t){if(null===n||"undefined"==typeof n)return new u(function(e,n){n(t)});i(function(){n.call(r,t)})}}},u.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(n){i(function(){t.call(e,null,n)})},function(n){i(function(){t.call(e,n)})})}},function(t,e,n){"use strict";var r=n(1);t.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._81)return this._65.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._65},r.prototype.getReason=function(){if(3===this._81)return this._65.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._65},r.prototype.getState=function(){return 3===this._81?this._65.getState():this._81===-1||this._81===-2?0:this._81}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}}]);